# Пакетное уменьшение изображений V2

![Icon](assets/icon100.png)

> Простая утилита для пакетного изменения размера JPEG‑изображений.

## Описание

`resize` позволяет быстро обрабатывать целые папки с фотографиями: уменьшать или масштабировать изображения до заданной максимальной стороны, играя количеством потоков для максимальной производительности. Проект поддерживает два режима работы:

* **CLI**: для автоматизации и скриптов.
* **GUI**: с использованием Fyne, удобное графическое окно и системный трей.

## Особенности

* Пакетная обработка всех `.jpg`/`.jpeg` в указанной директории.
* Конфигурация числа потоков и максимального размера.
* Прогресс‑бар в терминале или в GUI.
* Кроссплатформенная сборка под Windows, macOS и Linux.

## Установка

Убедитесь, что у вас установлен Go 1.22+ и настроен `GOPATH`.

### CLI версия

```bash
go install github.com/markvoronov/go_resize_photo_v2/cmd/resize@latest
```

### GUI версия

```bash
go install github.com/markvoronov/go_resize_photo_v2/cmd/resize-gui@latest
```

После этого бинарь(и) попадут в `$GOPATH/bin` (или `$(go env GOPATH)/bin`).

## Использование

### CLI

```bash
# Изменить все JPEG в папке /photos, максимальная сторона 1920px, 4 потока
resize --cli --path="C:/users/images" --max=1920 --threads=4
```

После старта утилита выведет прогресс в формате:

```
[ 42/128 ] 32.8%
...
Готово
```

### GUI

```bash
resize
```

* Нажмите «Select» для выбора папки.
* Задайте «Threads» и «Max px».
* Нажмите «Run» для запуска.

В системном трее появится иконка, через контекстное меню можно открыть диалог «About» с информацией об авторе.

## Конфигурация

По умолчанию:

* `--threads` = `NumCPU() - 2`, минимум 1
* `--max` = `3840` (4K)

Можно переопределить флагами или переменными окружения:

* `RESIZE_DEBUG=1` — включить подробное логирование.

## Разработка и тесты

```bash
git clone https://github.com/markvoronov/go_resize_photo_v2.git
cd go_resize_photo_v2
go mod tidy
# Запустить все тесты с проверкой гонок
go test ./... -race
```

## Лицензия

Проект распространяется под лицензией MIT. Смотрите файл [LICENSE](LICENSE) для подробностей.
